<!DOCTYPE html><html class=no-js><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Adding non-core feature-detects with Grunt-Modernizr</title><meta name=description content="A quick guide on how to use Modernizr's community feature detects with grunt-modernizr."><meta name=viewport content="width=device-width"><link rel=stylesheet href=/css/main.f359.css><link href="http://fonts.googleapis.com/css?family=Ubuntu:400,700" rel=stylesheet type=text/css><script src=/js/vendor/modernizr.4009.js></script><!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--><meta name=twitter:site content=richardwestenra><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Adding non-core feature-detects with Grunt-Modernizr"><meta name=twitter:description content="A quick guide on how to use Modernizr's community feature detects with grunt-modernizr."><meta name=twitter:image:src content=http://richardwestenra.com/assets/social/grunt-modernizr.png><meta itemprop=name content="Adding non-core feature-detects with Grunt-Modernizr"><meta itemprop=description content="A quick guide on how to use Modernizr's community feature detects with grunt-modernizr."><meta itemprop=image content=http://richardwestenra.com/assets/social/grunt-modernizr.png><meta property=og:title content="Adding non-core feature-detects with Grunt-Modernizr"><meta property=og:description content="A quick guide on how to use Modernizr's community feature detects with grunt-modernizr."><meta property=og:image content=http://richardwestenra.com/assets/social/grunt-modernizr.png></head><body class=default><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-9812933-1', 'auto');
  ga('send', 'pageview');</script><div class=container><header class=header role=banner><div class=wrapper><h1 class=title><a title=Home href="/">richardwestenr<i class=icon-home></i><span>a</span>.com</a></h1><a href=#nav class="mobile-only hamburger" role=button><i class=icon-menu></i><span>Menu</span></a><ul id=nav role=navigation><li><a href="/blog/"><i class=icon-comment></i><span>Blog</span></a></li><li><a href="/portfolio/"><i class=icon-briefcase></i><span>Portfolio</span></a></li><li><a href="/linkblog/"><i class=icon-link></i><span>Linkblog</span></a></li><li><a href=mailto:richard@richardwestenra.com target=_blank><i class=icon-mail></i><span>Send me an email</span></a></li><li><a href=http://github.com/richardwestenra target=_blank><i class=icon-github></i><span>Fork me on Github</span></a></li><li><a href=http://twitter.com/richardwestenra target=_blank><i class=icon-twitter></i><span>Follow me on Twitter</span></a></li><li><a href=# role=button class=configBtn><i class=icon-cog></i><span>Site settings</span></a></li></ul></div></header><!--[if lt IE 8]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><noscript><p class=browsehappy>For full functionality of this site it is necessary to enable JavaScript. Here are <a href="http://www.enable-javascript.com/" target=_blank>instructions how to enable JavaScript in your web browser</a>.</p></noscript><main class=wrapper><article class="post default"><h2 class=postHeader>Adding non-core feature-detects with Grunt-Modernizr</h2><p class=meta>Published 17 Feb 2015</p><style>.post h2 {
        font-size: 2.4em;
    }
    .post h3 {
        font-size: 1.5em;
    }</style><p><a href="http://modernizr.com/">Modernizr</a> is a JavaScript library which detects HTML5 and CSS3 features in users&#39; browsers, and makes it easy to take advantage of cutting-edge techniques without abandoning users on older browsers. It also has a modular <a href="http://modernizr.com/download/">build tool</a>, which is great for optimising its file size and improving page speed. However using this in your website can make your code-base less maintainable. This is because it can be a little hard to keep track of which features you&#39;re using where, which can be tricky when you need to add new feature-detects.</p><p>This is where <a href=https://github.com/Modernizr/grunt-modernizr>Grunt-Modernizr</a> comes in. This tool automatically sifts through your project files looking for references to Modernizr tests, and generates a custom Modernizr file containing only the bits that you need. It&#39;s basically magic, and it has revolutionised the way I use Modernizr.</p><p>Unfortunately, one of the trickier aspects of using grunt-modernizr is adding non-core feature detects. There are some really useful tests (such as <a href=https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events>CSS pointer-events</a>) which aren&#39;t currently part of the core feature set, so they aren&#39;t tested by default. You must add them manually.</p><p>This is very simple once you know how, but I recently spent more time than I&#39;d care to admit trying to figure out the &#39;right&#39; way to do it. There aren&#39;t many instructions online so I&#39;m posting this for future reference, and in case others run into the same problem.</p><p><strong>Nota bene:</strong> I use a variation of Yeoman&#39;s <a href=https://github.com/yeoman/generator-webapp>Webapp generator</a> as my standard project boilerplate, so these instructions assume a similar setup using Bower, grunt-usemin, etc.</p><p><br></p><h3>Step 1: Set up the test in your local dev environment</h3><p>Assuming that you&#39;ve installed Modernizr with Bower, open Modernizr&#39;s <a href=https://github.com/Modernizr/Modernizr/tree/master/feature-detects>feature-detects directory</a> (which should be in <code>bower_components/modernizr/feature-detects/</code>. If you don&#39;t use Bower, then you might need to download the right test file from <a href=https://github.com/Modernizr/Modernizr/tree/master/feature-detects>Github</a>). Find the script with the feature detect that you need, and copy the path to the file. Include this script in your header next to the regular Modernizr script. It should look a bit like this:</p><div class=highlight><pre><code class="text language-text" data-lang=text>&lt;!-- build:js scripts/vendor/modernizr.js --&gt;
&lt;script src=&quot;bower_components/modernizr/modernizr.js&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;bower_components/modernizr/feature-detects/css-pointerevents.js&quot;&gt;&lt;/script&gt;
&lt;!-- endbuild --&gt;
</code></pre></div><p><br></p><h3>Step 2: Add the test to your production build</h3><p>Update the options in your Gruntfile&#39;s Modernizr config block, so that it includes your custom tests in the production build. You should be okay to just add <code>matchCommunityTests: true</code> and let it automatically find your non-core tests, but if you want to be certain then add your tests to the <code>tests</code> array:</p><div class=highlight><pre><code class="text language-text" data-lang=text>modernizr: {
  dist: {
    // Other options here...
    matchCommunityTests: true, // Set this to true to auto-detect non-core tests
    tests: [ &#39;csspointerevents&#39; ]  // Manually add tests here
  }
}
</code></pre></div><p><br></p><p>That&#39;s it, you&#39;re done. If this post helps you out or you run into any issues, please let me know in the comments!<br></p></article></main><aside class="featuredPosts wrapper-small"><h3>Liked this post? You might like:</h3><ul class=fp_list><li class=fp_item><a class=thumb href="/arcus-redesign/" title="Case Study: Redesigning the Arcus mobile app"><img src=/img/blogThumbs/arcus.9bf7.png alt="Case Study: Redesigning the Arcus mobile app" width=279 height=92></a></li><li class=fp_item><a class=thumb href="/live-iss-screensaver/" title="ISS Screensaver"><img src=/img/blogThumbs/iss.2db5.jpg alt="ISS Screensaver" width=279 height=92></a></li><li class=fp_item><a class=thumb href="/daily-mail/" title="If Daily Mail readers wrote the headlines"><img src=/img/blogThumbs/dailymail.8ba8.png alt="If Daily Mail readers wrote the headlines" width=279 height=92></a></li></ul></aside><script id=config_tmpl type=text/template><div id="config">
		<div class="wrapper">
			<a class="configBtn" href="#" title="Close" role="button">&times;</a>
			<h3>Configure site options</h3>
			<section>
				<h4>Change theme</h4>
				<ul id="styleSwitcher">
				   <li><a class="on" href="#" id="standard"><i class="icon-check-empty"></i> Standard</a></li>
				   <li><a href="#" id="geocities"><i class="icon-check-empty"></i> Geocities</a></li>
				</ul>
			</section>
			<section>
				<h4>Modify link behaviour</h4>
				<ul id="linkSwitcher">
					<li><a href="#" class="on"><i class="icon-check-empty"></i> Open external links in a new tab</a></li>
				</ul>
			</section>
		</div>
	</div></script><script src=//code.jquery.com/jquery-1.11.0.min.js></script><script src=/js/main.bc51.js></script><div id=disqus_thread class=wrapper-small><noscript><p class=browsehappy>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a></p></noscript></div><script type=text/javascript>var disqus_shortname = 'richardwestenra';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><footer class=footer><div class=wrapper><p class=contact><a href=mailto:richard@richardwestenra.com target=_blank><i class=icon-mail></i> richard@richardwestenra.com</a> <a href=http://twitter.com/richardwestenra target=_blank><i class=icon-twitter></i> @richardwestenra</a></p><p class=legal><span>&copy;</span> Copyleft: All wrongs reserved</p></div></footer></div></body></html>